(function(t){function e(e){for(var i,r,s=e[0],l=e[1],u=e[2],h=0,d=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),a=n.n(i);a.a},"205a":function(t,e,n){},"2beb":function(t,e,n){"use strict";var i=n("205a"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Home")},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h1",{staticClass:"header"},[t._v("Charts by d3")]),n("Area",{attrs:{id:"area",width:500*t.$ratio,height:300*t.$ratio,dataset:t.area.dataset,option:t.area.option}}),n("Ring",{attrs:{id:"ring",width:500*t.$ratio,height:420*t.$ratio,dataset:t.ring.dataset,option:t.ring.option}})],1)},s=[],l=(n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d3-wrap",style:"width:"+t.width+"px;height:"+t.height+"px",attrs:{id:t.id}})}),u=[],c=(n("4de4"),n("fb6a"),n("a9e3"),n("2909")),h=n("3835"),d=n("5698"),f=(n("d3b7"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n&&cancelAnimationFrame(n),n=requestAnimationFrame((function(){n=null,t.apply(e,a)}))}}),p=(n("99af"),n("0481"),n("4160"),n("13d5"),n("4069"),n("b64b"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("159b"),n("d4ec")),g=n("bee2"),b=function(){function t(e){Object(p["a"])(this,t),this.option=Object.assign({width:null,height:null,padding:6,fontSize:14,borderRadius:6},e),this.autoStyle={},this.$g=document.createElementNS("http://www.w3.org/2000/svg","g"),this.$box=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.$g.appendChild(this.$box),this.createTextGroup(),this.initStyle(),this.setBoxSize(),this.hide()}return Object(g["a"])(t,[{key:"createTextGroup",value:function(){this.$textGroup=this.$g.cloneNode(),this.$text=document.createElementNS("http://www.w3.org/2000/svg","text"),this.$text2=this.$text.cloneNode(),this.$textContent=document.createTextNode(""),this.$textContent2=this.$textContent.cloneNode(""),this.$text.appendChild(this.$textContent),this.$text2.appendChild(this.$textContent2),this.$textGroup.appendChild(this.$text),this.$textGroup.appendChild(this.$text2),this.$g.appendChild(this.$textGroup)}},{key:"initStyle",value:function(){var t=this.option,e=t.padding,n=t.fontSize;this.$g.setAttribute("style","transition: transform 0.4s"),this.$text.setAttribute("font-size","".concat(n)),this.$text.setAttribute("fill","#9fceff"),this.$text2.setAttribute("font-size","".concat(n)),this.$text2.setAttribute("fill","#9fceff"),this.$text2.setAttribute("transform","translate(0, ".concat(1.5*n,")")),this.$textGroup.setAttribute("transform","translate(".concat(e,",0)"))}},{key:"setText",value:function(t,e){var n=this.$textContent.data,i=this.$textContent2.data,a=document.createTextNode(t);if(this.$text.replaceChild(a,this.$textContent),this.$textContent=a,e){var o=document.createTextNode(e);this.$text2.replaceChild(o,this.$textContent2),this.$textContent2=o}Math.max(t.length,e.length)>Math.max(n.length,i.length)&&this.setBoxSize()}},{key:"setTextAttribute",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach((function(e,n){if("[object Object]"===Object.prototype.toString.call(e))for(var i=Object.keys(e),a=0;a<i.length;a++){var o=i[a],r="$text".concat(0===n?"":n+1);t[r]&&t[r].setAttribute(o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e[o])}}))}},{key:"setBoxSize",value:function(){var t=this.option,e=t.width,n=t.height,i=t.padding,a=t.fontSize,o=t.borderRadius,r=this.$textContent.data,s=void 0===r?"":r,l=this.$textContent2.data,u=void 0===l?"":l,c=s.split("").reduce((function(t,e){return t+(e.charCodeAt(0),1)}),0),h=u.split("").reduce((function(t,e){return t+(e.charCodeAt(0),1)}),0),d=this.$text.getAttribute("font-size")||a,f=this.$text2.getAttribute("font-size")||a;this.autoStyle.width=Math.max(c*d,h*f)+2*i,this.autoStyle.height=1.5*(1*d+1*f)+2*i,this.$box.setAttribute("x",0),this.$box.setAttribute("y",0),this.$box.setAttribute("width",e||this.autoStyle.width),this.$box.setAttribute("height",n||this.autoStyle.height),this.$box.setAttribute("rx",o),this.$box.setAttribute("ry",o),this.$box.setAttribute("fill","rgba(0, 0, 0, 0.6)"),this.$box.setAttribute("transform","translate(0, ".concat(-(n|this.autoStyle.height)/2,")"))}},{key:"show",value:function(){this.$g.removeAttribute("display")}},{key:"hide",value:function(){this.$g.setAttribute("display","none")}},{key:"move",value:function(t,e){this.$g.setAttribute("transform","translate(".concat(t,",").concat(e,")"))}},{key:"node",value:function(){return this.$g}}]),t}(),v=function(){function t(e){Object(p["a"])(this,t),this.option=Object.assign({x1:0,y1:0,x2:0,y2:0},e),this.$g=document.createElementNS("http://www.w3.org/2000/svg","g"),this.$line=document.createElementNS("http://www.w3.org/2000/svg","line"),this.$line.setAttribute("x1",this.option.x1),this.$line.setAttribute("y1",this.option.y1),this.$line.setAttribute("x2",this.option.x2),this.$line.setAttribute("y2",this.option.y2),this.initStyle(),this.$g.appendChild(this.$line),this.hide()}return Object(g["a"])(t,[{key:"initStyle",value:function(){this.$g.setAttribute("style","transition: transform 0.2s ease-out"),this.$line.setAttribute("stroke","#888"),this.$line.setAttribute("stroke-width",1),this.$line.setAttribute("stroke-dasharray",[4,2])}},{key:"show",value:function(){this.$g.removeAttribute("display")}},{key:"hide",value:function(){this.$g.setAttribute("display","none")}},{key:"move",value:function(t,e){this.$g.setAttribute("transform","translate(".concat(t,",").concat(e,")"))}},{key:"setAttribute",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n],a=e[n].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.$g.setAttribute(a,t[i])}}},{key:"node",value:function(){return this.$g}}]),t}(),m=function(){function t(e){Object(p["a"])(this,t),this.option=Object.assign({width:200,height:200},e),this.timer=null,this.filterId="filter-blur",this.$filter=this.createFilter()}return Object(g["a"])(t,[{key:"createFilter",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","g"),e=document.createElementNS("http://www.w3.org/2000/svg","filter"),n=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");return n.setAttribute("in","SourceGraphic"),n.setAttribute("stdDeviation",5),e.setAttribute("id",this.filterId),e.appendChild(n),t.appendChild(e),t}},{key:"mount",value:function(t){t&&!this.option.parent&&(this.option.parent=t,t.appendChild(this.$filter))}},{key:"track",value:function(t){t&&!this.option.el&&(this.option.el=t)}},{key:"show",value:function(){var t=this.option.el;t&&t.setAttribute("filter","url(#".concat(this.filterId,")"))}},{key:"hide",value:function(){var t=this.option.el;t&&t.removeAttribute("filter")}},{key:"id",value:function(){return this.filterId}},{key:"node",value:function(){return this.$filter}}]),t}(),x=function(){function t(e,n,i){if(Object(p["a"])(this,t),n.target.length!==n.primary.length)throw Error("系列变量必须一一配对");this.option=e,this.domain=n,this.fn=i,this.timer=null,this.createAnimationQueue()}return Object(g["a"])(t,[{key:"createAnimationQueue",value:function(){var t=this.domain,e=t.primary,n=t.target,i=this.option,a=i.duration,o=i.timingFunc,r=Math.ceil(a/16),s=[];"linear"===o&&e.forEach((function(t,e){var i=n[e];if(isNaN(parseFloat(t))||isNaN(parseFloat(i)))console.error("Expected Number, but got primary:".concat(JSON.stringify(t),",target:").concat(JSON.stringify(i),"."));else{var a=Array.apply(null,{length:r}).map((function(e,n){return t+(i-t)*(n+1)/r}));s.push(a)}})),this.queue=s}},{key:"abort",value:function(){cancelAnimationFrame(this.timer),this.queue=[]}},{key:"run",value:function(){var t=this,e=function e(){return requestAnimationFrame((function(){console.log("animating...");var n=[];t.queue.forEach((function(t){n.push(t.shift())})),n.length&&t.fn(n),t.queue&&t.queue.length&&t.queue.flat().length&&(t.timer=e())}))};this.timer=e()}}]),t}(),y=function(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];if(r.length<4)throw Error("Expected 4 parameters but got ".concat(r.length));var l=r[0],u=r[1],c=r[2],h=r[3],d=c+a,f=h+a;return d<t+l?d=c+a:d>e-l&&(d=c-l-a),f<n+u?f=h+u+a:f>i-u&&(f=h-u-a),[d,f]}},w=function(t){return!!(Array.isArray(t)&&t.length>1&&Array.isArray(t[0])&&Array.isArray(t[1]))},A=function(t){return!!(w(t)&&t[0].length&&t[1].length)},$=function(t,e){for(var n=0,i=0;i<e.length;i++)if(e[i]>=t){n=i;break}return n},k={grid:{top:20,right:20,bottom:20,left:30},global:{fontSize:14}},M={props:{dataset:{validator:w},id:[Number,String],width:{type:[Number,String],default:600},height:{type:[Number,String],default:200},option:Object},data:function(){return{bootstrap:null,tooltip:null,toolline:null,filter:null}},watch:{dataset:function(){this.renderChart()}},computed:{config:function(){return Object.assign({},k,this.option)},useful:function(){if(!w(this.dataset))return{};var t=this.width,e=this.height,n=Object(h["a"])(this.dataset,2),i=n[0],a=n[1],o=this.config.grid,r=o.top,s=o.bottom,l=o.left,u=o.right,c=d["g"]().domain([d["f"](i),d["e"](i)]).range([l,t-u]),f=d["g"]().domain([d["f"](a),d["e"](a)]).range([e-s,r]);return{width:parseFloat(t),height:parseFloat(e),top:parseFloat(r),bottom:parseFloat(s),left:parseFloat(l),right:parseFloat(u),fx:c,fy:f}}},created:function(){this.onMousemove=f(this.onMousemove,this)},mounted:function(){this.initBootStrap(),this.renderChart(),this.mountChart()},beforeDestroy:function(){this.bootstrap.node().removeEventListener("mousemove",this.onMousemove),this.bootstrap.node().removeEventListener("mouseleave",this.onMouseleave)},methods:{initBootStrap:function(){this.bootstrap=d["d"]("svg").attr("width",this.width).attr("height",this.height).attr("viewbox","0, 0, 800, 200"),this.filter=new m,this.filter.mount(this.bootstrap.node())},drawAxis:function(){var t=this.useful,e=t.width,n=t.height,i=t.bottom,a=t.left,o=t.right,r=t.fx,s=t.fy,l=d["b"](r).ticks(12),u=d["c"](s).ticks(5),c=this.bootstrap.select(".d3-x-axis").node()?this.bootstrap.select(".d3-x-axis"):this.bootstrap.append("g").attr("class","d3-x-axis"),h=this.bootstrap.select(".d3-y-axis").node()?this.bootstrap.select(".d3-y-axis"):this.bootstrap.append("g").attr("class","d3-y-axis");c.attr("transform","translate(0,".concat(n-i,")")).call(l).call((function(t){return t.call((function(t){return t.select(".domain").attr("stroke","#6076AD")})).call((function(t){return t.selectAll(".tick text").attr("fill","#6076AD")})).selectAll(".tick line").attr("stroke","#6076AD")})),h.attr("transform","translate(".concat(a,",0)")).call(u).call((function(t){t.select(".domain").attr("style","display:none")})).call((function(t){t.call((function(t){return t.selectAll(".tick text").attr("fill","#6076AD")})).selectAll(".tick line").attr("stroke","rgba(14, 252, 255, 0.6)").attr("x2",e-o-a).attr("stroke-dasharray",[4,2]).attr("stroke-width",1).attr("stroke-linecap","butt")}))},drawArea:function(){var t=this,e=this.useful,n=e.height,i=e.bottom,a=e.fx,o=e.fy,r=Object(h["a"])(this.dataset,2),s=r[0],l=r[1],u=l.map((function(t,e){return[s[e],t]})),c=d["a"]().x((function(t){return a(t)})).y0((function(){return n-i})).y1((function(t,e){return o(u[e][1])})),f=d["h"](".d3-area").node()?d["h"](".d3-area"):this.bootstrap.call((function(t){t.append("defs").append("linearGradient").attr("id","gradient-fade-in").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%").call((function(t){t.append("stop").attr("offset","0%").attr("stop-color","RGBA(50, 112, 135, 0.4)")})).call((function(t){t.append("stop").attr("offset","100%").attr("stop-color","RGBA(0, 255, 255, 1)")}))})).append("path").attr("class","d3-area").call((function(e){return t.filter.track(e.node())}));f.attr("d",c(s.slice(0,u.length))).attr("fill","url(#gradient-fade-in)")},drawTools:function(){var t=this.config.tooltip||this.config.global,e=t.fontSize,n=t.padding,i=void 0===n?0:n,a=this.useful,o=a.height,r=a.bottom,s=a.top;this.tooltip=new b({fontSize:e,padding:i}),this.toolline=new v({x1:0,y1:o-r,x2:0,y2:s}),this.bootstrap.node().appendChild(this.tooltip.node()),this.bootstrap.node().appendChild(this.toolline.node()),this.bootstrap.node().addEventListener("mousemove",this.onMousemove),this.bootstrap.node().addEventListener("mouseleave",this.onMouseleave)},onMousemove:function(t){var e;if(!this.tooltip||!A(this.dataset))return this.$tooltip&&this.$tooltip.hide(),void(this.$toolline&&this.$toolline.hide());var n=this.useful,i=n.fx,a=n.width,o=n.height,r=n.left,s=n.right,l=n.top,u=n.bottom,d=y(r,a-s,l,o-u,50*this.$ratio),f=t.offsetX,p=t.offsetY,g=Object(h["a"])(this.dataset,2),b=g[0],v=g[1],m=$(i.invert(f),b),x=m>0?m-1:0,w=f-i(b[x])<=i(b[m])-f?x:m;this.toolline.show(),this.toolline.move(i(b[w]),0),this.tooltip.show(),(e=this.tooltip).move.apply(e,Object(c["a"])(d(this.tooltip.autoStyle.width,this.tooltip.autoStyle.height,f,p))),this.tooltip.setText("时刻：".concat(b[w]),"空气质量：".concat(Math.round(v[w])||"--"))},onMouseleave:function(){this.toolline.hide(),this.tooltip.hide()},renderChart:function(){if(this.bootstrap){if(!A(this.dataset))return console.log("Empty or wrong dataset, rendering aborted."),void this.filter.show();this.filter.hide(),console.log("rendering Area!"),this.drawAxis(),this.drawArea(),this.tooltip||this.toolline||this.drawTools()}else console.log("Root element [bootstrap] was not found and already returned.")},mountChart:function(){this.bootstrap?document.getElementById(this.id).append(this.bootstrap.node()):console.log("指定的svg元素不存在，无法挂载图表")}}},j=M,O=n("2877"),S=Object(O["a"])(j,l,u,!1,null,"a6c216c2",null),C=S.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d3-wrap",style:"width:"+t.width+"px;height:"+t.height+"px",attrs:{id:t.id}})},F=[],P=(n("caad"),n("a15b"),n("466d"),n("841c"),n("4c53"),"d3-ring-outline"),I="d3-ring-line",z="d3-ring-innerline",E="d3-ring-legend",R="d3-ring-title",T={global:{fontSize:14,color:"#333"},grid:{left:10,right:10,top:10,bottom:10},axis:{d1:10,d2:25,d3:20,tickHeight:10},legend:{super:{text:"",fontSize:16},value:{fontSize:40},sub:{text:"",fontSize:16},title:{text:""}}},_=function(t){return t.map((function(t){if(!t&&0!==t)return{text:"",unit:null,tag:null,position:-1};var e=t.search(/(<\w+>)\s*\S+\s*(<\/\w+>)/g),n=t.replace(/(<\w+>)\s*\S+\s*(<\/\w+>)/g,""),i=t.match(/(<\w+>)\s*\S+\s*(<\/\w+>)/g),a=i?i[0].replace(/(<\/?\w+>)|\s*/g,""):null,o=i?i[0].match(/<\w+>/)[0].replace(/<|>/g,""):null;return{text:n,unit:a,tag:o,position:e}}))},B=function(t){for(var e="",n=Object.keys(t),i=["fontSize","width","height","top","bottom","left","right"],a=0;a<n.length;a++){var o=n[a],r=i.includes(o)?"".concat(t[o],"px"):t[o],s=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e+="".concat(s,": ").concat(r,";")}return e},G=function(t,e){e.tag?e.position>0?(t.text(e.text),t.selectAll("span").data([e.unit]).join((function(t){return t.append("span").attr("style","vertical-align:".concat(e.tag,";font-size: 0.8em")).text(e.unit)}),(function(t){return t.selectAll("span").text(e.unit)}),(function(t){return t.remove()}))):(t.selectAll("span").data([e.unit]).join((function(t){return t.append("span").attr("style","vertical-align:".concat(e.tag,";font-size: 0.8em")).text(e.unit)}),(function(t){return t.selectAll("span").text(e.unit)}),(function(t){return t.remove()})),t.text(e.text)):t.text(e.text)},D=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Object(h["a"])(t,3),o=a[0],r=a[1],s=a[2],l=Object(h["a"])(e,3),u=l[0],c=l[1],d=l[2];return function(t,e){var a=Object(h["a"])(e,2),l=a[0],f=a[1],p=Math.min(t,f),g=(p-l)/(f-l);return g<=n?[o,r,s]:g>=i?[u,c,d]:[Math.round(o+(g-n)/(i-n)*(u-o)),Math.round(r+(g-n)/(i-n)*(c-r)),Math.round(s+(g-n)/(i-n)*(d-s))]}},q={props:{id:[Number,String],width:{type:[Number,String],default:488},height:{type:[Number,String],default:422},dataset:{validator:w},option:Object,size:String},computed:{config:function(){return Object.assign({},T,this.option)},useful:function(){if(!w(this.dataset))return{};var t=this.config.axis,e=t.d1,n=t.d2,i=t.d3,a=t.tickHeight,o=this.width,r=this.height,s=this.config.grid,l=s.top,u=s.bottom,c=s.left,d=s.right,f=o-c-d,p=r-l-u,g=f/2,b=g-(f-p),v=g*(1-Math.sin(Math.PI/4)),m=g*(1+Math.cos(Math.PI/4)),x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return v+e*Math.sin(t)},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return m-e*Math.cos(t)},A=function(t,e){return Math.sqrt(Math.pow(t-v,2)+Math.pow(e-m,2))},$=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3*Math.PI/2,a=5*Math.PI/4,o=a-Math.min(i,3*Math.PI/2);return"M".concat(c+t," ").concat(l+e," A").concat(n," ").concat(n,", 0, ").concat(i<Math.PI?0:1,", 1, ").concat(c+g+n*Math.cos(o)," ").concat(l+g-n*Math.sin(o))},k=g-(e+n+i)-a-2,M=function(t){return[[g+(k+a)*Math.cos(t),b+(k+a)*Math.sin(t)],[g+k*Math.cos(t),b+k*Math.sin(t)]]},j=function(t){var e=M(t),n=Object(h["a"])(e,2),i=Object(h["a"])(n[0],2),a=i[0],o=i[1],s=Object(h["a"])(n[1],2),l=s[0],d=s[1];return{x1:a+c,y1:r-u-o,x2:l+c,y2:r-u-d}};return{x0:v,y0:m,r0:g,x:x,y:y,r:A,contentRadius:k,generatePath:$,generateTick:j,width:parseFloat(o),height:parseFloat(r),top:parseFloat(l),bottom:parseFloat(u),left:parseFloat(c),right:parseFloat(d)}}},data:function(){return{bootstrap:null,animationRunner:null,oldDataset:null,filter:null}},watch:{dataset:function(t,e){this.oldDataset=JSON.parse(JSON.stringify(e)),this.renderChart()}},mounted:function(){this.initBootstrap(),this.renderChart(),this.mountChart()},methods:{initBootstrap:function(){this.bootstrap=d["d"]("svg").attr("width",this.width).attr("height",this.height).attr("viewbox","0, 0, 488, 422"),this.filter=new m({parent:this.bootstrap.node()})},renderChart:function(){if(this.bootstrap){if(!A(this.dataset))return console.log("Empty or wrong dataset, rendering aborted."),void this.filter.show();this.filter.hide(),console.log("rendering Ring!"),this.drawAxis(),this.drawLegend(),this.drawRing(),this.drawTitle()}else console.log("Root element [bootstrap] was not found and already returned.")},mountChart:function(){this.bootstrap?document.getElementById(this.id).append(this.bootstrap.node()):console.log("指定的svg元素不存在，无法挂载图表")},drawAxis:function(){this.width<this.height&&console.log("该宽高比可能导致渲染不符预设");var t=this.config.axis,e=t.d1,n=t.d2,i=t.d3,a=this.useful,o=a.x0,r=a.y0,s=a.r0,l=a.x,u=a.y,h=a.r,d=a.generatePath,f=a.generateTick,p=this.bootstrap.select(".".concat(P)).node()?this.bootstrap.select(".".concat(P)):this.bootstrap.append("path").attr("class",P).attr("stroke","#2ACAFF").attr("fill","transparent");p.attr("d",d(o,r,s));var g=l(Math.PI/4,e+n+i),b=u(Math.PI/4,e+n+i),v=s-h(g,b),m=this.bootstrap.select(".".concat(z)).node()?this.bootstrap.select(".".concat(z)):this.bootstrap.append("g").attr("class",z);m.call((function(t){t.selectAll("line").data([1,2,3,4,5,6,8]).join("line").attr("stroke","#2ACAFF").attr("x1",(function(t){return f(Math.PI/4*(t-1)).x1})).attr("y1",(function(t){return f(Math.PI/4*(t-1)).y1})).attr("x2",(function(t){return f(Math.PI/4*(t-1)).x2})).attr("y2",(function(t){return f(Math.PI/4*(t-1)).y2}))})).selectAll("path").data([[g,b,v]]).join((function(t){return t.append("path").attr("stroke","#2ACAFF").attr("stroke-width","1").attr("fill","transparent").attr("d",(function(t){return d.apply(void 0,Object(c["a"])(t))}))}),(function(t){return t.attr("d",(function(t){return d.apply(void 0,Object(c["a"])(t))}))}),(function(t){return t.remove()}))},drawRing:function(){var t=this,e=Object(h["a"])(this.dataset,2),n=Object(h["a"])(e[0],1),i=n[0],a=Object(h["a"])(e[1],2),o=a[0],r=a[1],s=parseFloat(i),l=parseFloat(o),u=parseFloat(r);(isNaN(l)||isNaN(u))&&console.error("domain must be Number, but got ".concat([o,r],"."));var c=this.useful,d=c.r0,f=c.x,p=c.y,g=c.r,b=c.generatePath,v=this.config.axis,m=v.d1,y=v.d2,w=this.oldDataset?this.oldDataset[0][0]:l,A=f(Math.PI/4,m+y/2),$=p(Math.PI/4,m+y/2),k=d-g(A,$),M=D([42,202,255],[239,10,106],.4,.9),j=this.bootstrap.select(".".concat(I)).node()?this.bootstrap.select(".".concat(I)).selectAll("path"):this.bootstrap.append("g").call((function(e){return t.filter.track(e.node())})).attr("class",I).call((function(t){return t.append("path").attr("stroke","rgba(125,125,125,0.3)").attr("stroke-width","".concat(y)).attr("stroke-linecap","round").attr("fill","transparent").attr("d",b(A,$,k,3*Math.PI/2))})).append("path").attr("stroke-width","".concat(y)).attr("stroke-linecap","round").attr("fill","transparent");this.animationRunner&&this.animationRunner.abort(),isNaN(s)?console.log("Animation canceled!Because value must be Number, but got ".concat(i,".")):(this.animationRunner=new x({duration:1e3,timingFunc:"linear"},{primary:[Math.min(w,u)],target:[Math.min(s,u)]},(function(t){var e=Object(h["a"])(t,1),n=e[0],i=M(n,[l,u]),a=Object(h["a"])(i,3),o=a[0],r=a[1],s=a[2];j.attr("d",b(A,$,k,n/u*Math.PI*3/2)).attr("stroke","rgba(".concat(o,", ").concat(r,", ").concat(s,", 0.6)"))})),this.animationRunner.run())},drawLegend:function(){var t=Object(h["a"])(this.dataset,1),e=Object(h["a"])(t[0],1),n=e[0],i=this.config,a=i.legend,o=i.global,r=this.useful,s=r.r0,l=r.top,u=r.contentRadius,c=_([a.super&&a.super.text,a.sub&&a.sub.text]),f=Object(h["a"])(c,2),p=f[0],g=f[1],b={position:"absolute",left:0,right:0,top:l+s-u,width:2*u,height:u*(1+Math.cos(Math.PI/4)),margin:"auto",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},v=d["h"]("#".concat(this.id)).select(".".concat(E)).node()?d["h"]("#".concat(this.id)).select(".".concat(E)):d["h"]("#".concat(this.id)).append("div").attr("class",E).attr("style",B(b));v.selectAll("p").data(["super","value","sub"]).join((function(t){return t.append("p").attr("class",(function(t){return t})).attr("style",(function(t){var e=Object.assign({},o,a[t]);return delete e.text,B(e)}))})),v.select(".super").call((function(t){return G(t,p)})),v.select(".value").call((function(t){return G(t,{text:parseFloat(n)})})),v.select(".sub").call((function(t){return G(t,g)}))},drawTitle:function(){var t=this.useful,e=t.r0,n=t.top,i=t.bottom,a=t.left,o=t.height,r=t.contentRadius,s=this.config.legend&&this.config.legend.title||{},l=s.text,u=this.config.axis.tickHeight,h="function"===typeof l?l:function(){return l},d={backgroundColor:"#1b225b",color:"#2acaff",border:"1px solid #0090ff",borderRadius:"10PX"},f=h(this.dataset)||"--",p=5,g=Object(c["a"])(f).reduce((function(t,e){return t+(e.charCodeAt(0)<=128?.5:1)}),0),b=2*(r+u)*Math.sin(Math.PI/4)*.9,v=b/Math.max(g,p),m=.8*v,x=o-i-(n+e+(r+u)*Math.cos(Math.PI/4)),y=x>=v?x:v,w=(y-m)/2,A=this.bootstrap.select(".".concat(R)).node()?this.bootstrap.select(".".concat(R)):this.bootstrap.append("g").attr("class",R);A.attr("transform","translate(".concat(a+e-b/2,", ").concat(o-i,")")).selectAll("rect").data([1]).join((function(t){return t.append("rect").attr("width",b).attr("height",y).attr("y",-m).attr("rx",w).attr("ry",w).attr("fill",d.backgroundColor).attr("stroke","#0090FF")}),(function(t){return t}),(function(t){return t.remove()})),A.selectAll("text").data([f]).join((function(t){return t.append("text").attr("font-size",m).text((function(t){return t})).attr("fill","#2acaff").attr("x",(b-g*m)/2)}),(function(t){return t.text((function(t){return t}))}))}}},L=q,J=(n("2beb"),Object(O["a"])(L,N,F,!1,null,null,null)),V=J.exports,H=function(t,e){var n=Array.apply(null,{length:t}).map((function(t,e){return e+1}));return[n,n.map((function(t,n){return e/2+e/2*Math.sin(n*Math.PI/parseInt(10*Math.random()+20))}))]},Z={components:{Area:C,Ring:V},data:function(){return{area:{dataset:null,option:null},ring:{dataset:null,option:{legend:{super:{text:"CO<sub>2</sub>",fontSize:16*this.$ratio},value:{fontSize:40*this.$ratio},sub:{text:"μg/m<super>3</super>",fontSize:16*this.$ratio},title:{text:"室外空气质量"}}}}}},mounted:function(){var t=this;setInterval((function(){t.setAreaValue(),t.setRingValue()}),3e3),this.setAreaValue(),this.setRingValue()},methods:{setAreaValue:function(){this.area.dataset=H(30,50)},setRingValue:function(){this.ring.dataset=[[Math.round(100*Math.random())],[0,100]]}}},Q=Z,X=(n("af1b"),Object(O["a"])(Q,r,s,!1,null,"9b88cfc2",null)),W=X.exports,Y={components:{Home:W}},K=Y,U=(n("034f"),Object(O["a"])(K,a,o,!1,null,null,null)),tt=U.exports;i["a"].config.productionTip=!1,i["a"].prototype.$ratio=window.innerWidth/1920,new i["a"]({el:"#app",render:function(t){return t(tt)}})},"85ec":function(t,e,n){},af1b:function(t,e,n){"use strict";var i=n("cb79"),a=n.n(i);a.a},cb79:function(t,e,n){}});
//# sourceMappingURL=app.bffc265b.js.map